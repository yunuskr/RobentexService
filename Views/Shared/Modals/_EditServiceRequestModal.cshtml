@model RobentexService.Models.ViewModels.Modals.EditServiceRequestModalVm
@* Bu partial SADECE <template> üretir. *@

<template id="edit-modal-tpl">
  <div class="rtx-modal-backdrop" data-modal>
    <div class="rtx-modal">
      <form id="editForm" method="post" action="@Model.SaveUrl">
        @Html.AntiForgeryToken()
        <input type="hidden" name="Id"/>

        <div class="rtx-modal-head">
          <h3>Talep Düzenleme</h3>
          <button type="button" class="x" data-close aria-label="Kapat">&times;</button>
        </div>

        <div class="rtx-modal-body">
          <!-- SOL -->
          <div class="col">
            <div class="grp">
              <label>Firma</label>
              <input class="inp ro" data-disp="CompanyName" readonly />
            </div>

            <div class="grp two">
              <div>
                <label>Ad</label>
                <input class="inp ro" data-disp="FirstName" readonly />
              </div>
              <div>
                <label>Soyad</label>
                <input class="inp ro" data-disp="LastName" readonly />
              </div>
            </div>

            <div class="grp two">
              <div>
                <label>Tel</label>
                <input class="inp ro" data-disp="Phone" readonly />
              </div>
              <div>
                <label>E-posta</label>
                <input class="inp ro" data-disp="Email" readonly />
              </div>
            </div>

            <div class="grp two">
              <div>
                <label>Robot Model</label>
                <input class="inp ro" data-disp="RobotModel" readonly />
              </div>
              <div>
                <label>Robot Seri No</label>
                <input class="inp ro" data-disp="RobotSerial" readonly />
              </div>
            </div>

            <div class="grp">
              <label>Arıza Tanımı</label>
              <textarea class="inp ro compact" rows="3" data-disp="FaultDescription" readonly></textarea>
            </div>

            
          </div>

          <!-- SAĞ -->
          <div class="col">
            <div class="grp">
              <label>Başlık</label>
              <input class="inp" name="Title" placeholder="Başlık" />
            </div>

            <div class="grp two">
              <div>
                <label>Müşteri Sipariş No</label>
                <input class="inp" name="CustomerOrderNo" />
              </div>
              <div>
                <label>Robentex Sipariş No</label>
                <input class="inp" name="RobentexOrderNo" />
              </div>
            </div>

            <div class="grp">
              <label>Takip No</label>
              <input class="inp" name="TrackingNo" />
            </div>

            <div class="grp">
              <label>Durum/Bayrak</label>
              <select class="inp" name="Status">
                <option value="0">Yeni Talep</option>
                <option value="1">Teklif İletildi</option>
                <option value="2">Servis Aşaması</option>
                <option value="3">Teklif Reddedildi</option>
                <option value="4">Tamamlandı</option>
                <option value="5">Fatura Edildi</option>
              </select>
            </div>

            <div class="grp">
              <label>Yeni Not (opsiyonel)</label>
              <textarea class="inp compact" name="NewNote" rows="3" placeholder="+ Not ekle"></textarea>
            </div>

            @* NOT LİSTESİ KALDIRILDI:
            <div class="notes" data-notes></div>
            *@
          </div>
        </div>

        <div class="rtx-modal-foot">
          <button type="button" class="btn" data-close>İptal</button>
          <button type="submit" class="btn ok">Kaydet</button>
        </div>
      </form>
    </div>
  </div>
</template>
<style>
/* Yalnızca mobil (≤820px) için modal gövdesi scroll + sütunları alt alta*/
@@media (max-width: 820px){
  .rtx-modal{
    width: 96vw;          /* ekranı daha iyi doldursun */
    max-height: 96vh;     /* başlık/altlık sabit, gövde taşarsa kaydır */
  }

  .rtx-modal-body{
    flex: 1 1 auto;       /* kalan alanı kapla */
    min-height: 0;        /* overflow çalışsın */
    overflow: auto;       /* mobilde gövde kaydırılabilir */
    display: block;       /* iki sütunu alt alta koy */
    padding: 12px 14px;   /* nefes alanı */
  }

  /* İki kolonun alt alta gelmesi */
  .rtx-modal-body .col{
    width: 100%;
    margin-bottom: 12px;
  }

  /* Çift alanlar yan yana ise (ör. .grp.two içindeki iki child) mobilde tam genişlik */
  .rtx-modal-body .grp.two > *{
    width: 100%;
    display: block;
    margin-bottom: 8px;
  }

  /* (Opsiyonel) mobil scrollbar görünümü */
  .rtx-modal-body::-webkit-scrollbar{ width: 10px; }
  .rtx-modal-body::-webkit-scrollbar-thumb{
    background:#555; border-radius:10px; border:2px solid #2f2f2f;
  }
}
/* === EDIT MODAL - SADECE MOBİL (≤820px) DÜZELTMELERİ === */
@@media (max-width: 820px){

  /* Modal kutusu: başlık/altlık sabit, gövde kayabilir */
  .rtx-modal{
    width: 96vw !important;
    max-height: 96vh !important;
    display: flex !important;
    flex-direction: column !important;
    overflow: hidden !important;
  }

  /* Gövde: kalan alanı kaplasın ve kaydırılabilsin */
  .rtx-modal-body{
    flex: 1 1 auto !important;
    min-height: 0 !important;
    overflow: auto !important;
    /* Masaüstünde grid/flex ise mobilde tek kolon olsun */
    display: block !important;
    padding: 12px 14px !important;
  }

  /* İki ana kolon alt alta */
  .rtx-modal-body .col{
    width: 100% !important;
    margin: 0 0 12px 0 !important;
  }

  /* .grp.two masaüstünde yan yana ise, mobilde alt alta getir */
  .rtx-modal-body .grp.two{
    display: block !important;         /* grid/flex’i iptal et */
  }
  .rtx-modal-body .grp.two > *{
    width: 100% !important;
    display: block !important;
    margin: 0 0 8px 0 !important;
  }
  .rtx-modal-body .grp.two > *:last-child{
    margin-bottom: 0 !important;
  }

  /* Form kontrolleri: iOS zoom’u engelle */
  .rtx-modal-body .inp,
  .rtx-modal-body select,
  .rtx-modal-body textarea{
    font-size: 16px !important;
  }

  /* Mobil scrollbar (opsiyonel) */
  .rtx-modal-body::-webkit-scrollbar{ width: 10px; }
  .rtx-modal-body::-webkit-scrollbar-thumb{
    background:#555; border-radius:10px; border:2px solid #2f2f2f;
  }
}
</style>